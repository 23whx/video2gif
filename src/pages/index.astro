---
import Layout from '../components/Layout.astro';
import Navigation from '../components/Navigation';
import HomePage from '../components/HomePage';
import Footer from '../components/Footer';
import I18nProvider from '../components/I18nProvider';
import { getSEOData, detectLanguageFromHeaders } from '../utils/seo';

// 从 URL 参数或浏览器语言检测语言
const urlLang = Astro.url.searchParams.get('lang');
const browserLang = detectLanguageFromHeaders(Astro.request.headers);
const currentLang = urlLang || browserLang;

// 获取 SEO 数据
const seoData = getSEOData('home', currentLang);
---

<Layout 
  title={seoData.title}
  description={seoData.description}
  keywords={seoData.keywords}
  lang={currentLang}
  ogImage={seoData.ogImage}
  ogImageAlt={seoData.ogImageAlt}
  page="home"
>
  <I18nProvider client:only="react">
    <Navigation client:only="react" />
    <HomePage client:only="react" />
    <Footer client:only="react" />
  </I18nProvider>
</Layout>
